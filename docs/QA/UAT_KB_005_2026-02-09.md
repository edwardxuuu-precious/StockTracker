# UAT Report: KB-005 Drift Monitoring And Threshold Governance (2026-02-09)

## 1) Basic Info

| Field | Value |
| --- | --- |
| Project | `StockTracker` |
| Scope | `KB-005` |
| Environment | `Local (Windows)` |
| Tester | `edwar + Codex` |
| Test Date | `2026-02-09` |

## 2) Scope

- Weekly KB benchmark monitor workflow and local monitor script.
- Trend history archive and retention behavior.
- Drift alert rule baseline and threshold-governance template.

## 3) Commands And Results

| Case ID | Command / Step | Expected | Actual | Status | Evidence |
| --- | --- | --- | --- | --- | --- |
| `KB5-UAT-01` | `python backend/scripts/kb_benchmark_monitor.py --profile prod` | Generate benchmark + monitor report under history directory | Report generated, passed | `PASS` | `.runtime/kb_benchmark_history/prod/monitor_20260209T111054Z.json` |
| `KB5-UAT-02` | `python backend/scripts/kb_benchmark_monitor.py --profile prod --retain-count 2` | Retention keeps latest 2 benchmark + 2 monitor reports | Directory contains exactly 4 files (2+2) | `PASS` | `.runtime/kb_benchmark_history/prod/` |
| `KB5-UAT-03` | Verify CI workflow file | Weekly monitor workflow exists with artifact upload | Workflow present and configured | `PASS` | `.github/workflows/kb-benchmark-monitor.yml` |
| `KB5-UAT-04` | Verify threshold change governance template | Template exists and is referenced by governance doc | Template present and governance doc updated | `PASS` | `docs/Ops/KB_Threshold_Change_Template.md`, `docs/Ops/Release_Governance.md` |
| `KB5-UAT-05` | `python -m pytest backend/tests/test_kb_benchmark_monitor.py -q` | Monitor script tests pass | `3 passed` | `PASS` | pytest output |
| `KB5-UAT-06` | `python -m pytest backend/tests -q` | No backend regression | `56 passed` | `PASS` | pytest output |
| `KB5-UAT-07` | `python backend/scripts/release_gate.py --profile dev --skip-docker --allow-dirty-git` | Gate still passes after KB-005 integration | `passed=True` | `PASS` | `.runtime/release_gate_dev_20260209T111233Z.json` |

## 4) Defect Fix During UAT

| Defect ID | Severity | Summary | Status |
| --- | --- | --- | --- |
| `KB5-BUG-001` | `P2` | Monitor retention initially executed before monitor file write, causing `monitor_*.json` to exceed keep-count by +1 | `Closed (fixed + test covered)` |

## 5) Acceptance Decision

| Decision | Value |
| --- | --- |
| Go / No-Go | `Go` |
| Residual Risk | `Drift monitoring baseline is automated; alert channel routing strategy still depends on environment webhook policy` |
| Follow-up | `Operate weekly monitor for at least 4 cycles, then recalibrate drift thresholds with evidence` |
